---
import { getCollection, render } from "astro:content";
import EventDetail from "@layouts/EventDetail.astro";

export async function getStaticPaths() {
    const events = await getCollection("events");
    return events.map((event) => ({
        params: { slug: event.slug },
        props: { event },
    }));
}

const { event } = Astro.props;
const { Content, headings } = await render(event);

const breadcrumbs = [
    {
        url: Astro.url.pathname,
        title: event.data.title,
        ariaCurrent: "page",
    },
];
---

<EventDetail
    frontmatter={event.data as any}
    headings={headings}
    breadcrumbs={breadcrumbs}>
    <Content />
</EventDetail>
