---
// warning: This file is overwritten by Astro Accelerator

import { Accelerator } from 'astro-accelerator-utils';
import type { Frontmatter } from 'astro-accelerator-utils/types/Frontmatter';
import { SITE } from '@config';
import { Translations, Lang } from '@util/Languages';
import ReadingTime from '@components/ReadingTime.astro';

const accelerator = new Accelerator(SITE);
const stats = new accelerator.statistics(
    'accelerator/components/AuthorsMini.astro'
);
stats.start();

// Properties
type Props = {
    lang: string;
    frontmatter: Frontmatter;
};
const { lang, frontmatter } = Astro.props satisfies Props;

// Language
const _ = Lang(lang);

// Logic
const authorList = accelerator.authors.forPost(frontmatter);
const dateToShow =
    frontmatter.modDate == null ? frontmatter.pubDate : frontmatter.modDate;

stats.stop();
---

{
    authorList.writers.length > 0 && (
        <div class="post-meta">
            <div class="author-info">
                <span
                    class="author-name"
                    set:html={authorList.mainAuthor.frontmatter.title}
                />
                <time
                    class="post-date"
                    datetime={dateToShow.toString()}
                    set:html={accelerator.dateFormatter.formatDate(
                        dateToShow,
                        lang
                    )}
                />
                <ReadingTime lang={lang} frontmatter={frontmatter} />
            </div>
        </div>
    )
}
